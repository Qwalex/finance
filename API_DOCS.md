# Документация по внешнему API

## Эндпоинт для создания транзакций

### URL
`POST /api/external/transaction`

### Заголовки запроса
```
Content-Type: application/json
x-api-key: ваш_api_ключ
```

### Параметры запроса

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| value | number | Да | Сумма транзакции |
| cat | string | Нет | Категория транзакции (по умолчанию "Другое") |
| description | string | Нет | Описание транзакции (по умолчанию "Внешняя транзакция: [категория]") |
| isIncome | boolean | Нет | Тип транзакции (по умолчанию false - расход) |

### Пример запроса

```bash
curl -X POST http://localhost:3000/api/external/transaction \
  -H "Content-Type: application/json" \
  -H "x-api-key: finance-app-external-api-key" \
  -d '{
    "value": 10000,
    "cat": "Жилье",
    "isIncome": true
  }'
```

### Успешный ответ

```json
{
  "success": true,
  "transaction": {
    "id": "uuid",
    "date": "2025-05-22T12:34:56Z",
    "amount": 10000,
    "category": "Жилье",
    "type": "income"
  }
}
```

### Ответ с ошибкой

```json
{
  "success": false,
  "error": "Поле value является обязательным"
}
```

### Примеры использования

1. Создание расхода по умолчанию:
```json
{
  "value": 5000
}
```

2. Создание расхода с указанием категории:
```json
{
  "value": 3000,
  "cat": "Продукты"
}
```

3. Создание дохода:
```json
{
  "value": 50000,
  "cat": "Зарплата",
  "isIncome": true
}
```

4. Создание транзакции с пользовательским описанием:
```json
{
  "value": 7500,
  "cat": "Развлечения",
  "description": "Поход в кино с друзьями"
}
```

## Безопасность

Для использования API необходимо указывать действительный API-ключ в заголовке `x-api-key`. 
Значение ключа должно быть установлено в переменной окружения `EXTERNAL_API_KEY`.
